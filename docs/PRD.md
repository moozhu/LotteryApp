# 幸运大抽奖 - 产品需求文档（PRD）

> **版本**: v1.0  
> **日期**: 2026-02-08  
> **状态**: 已完成  
> **技术栈**: Vue 3 + TypeScript + Pinia + Tailwind CSS

---

## 1. 产品概述

### 1.1 产品定位

**幸运大抽奖**是一款面向企业年会、团队活动、庆典场合的**纯前端抽奖应用**。无需后端服务，所有数据存储在浏览器本地，即开即用，适合大屏展示。

### 1.2 核心价值

- **零部署成本**: 单 HTML 文件即可运行，无需服务器
- **高度可定制**: 支持主题切换、规则配置、数据导入导出
- **专业视觉效果**: 3D 动画、粒子特效、音效配合，营造仪式感
- **数据安全**: 所有数据本地存储，保护参与者隐私

### 1.3 目标用户

| 用户角色 | 使用场景 | 核心需求 |
|---------|---------|---------|
| 活动组织者 | 配置参与者、奖项、规则 | 简单直观的配置流程 |
| 主持人 | 现场控制抽奖流程 | 大屏友好的操作界面 |
| 参与者 | 观看抽奖过程 | 公平、有趣、有参与感 |

---

## 2. 功能架构

```
┌─────────────────────────────────────────────────────────────┐
│                        幸运大抽奖                            │
├─────────────────────────────────────────────────────────────┤
│  页面结构（仅3个页面）                                         │
├─────────────────────────────────────────────────────────────┤
│  首页（/）- 奖项选择                                          │
│  ├── 快捷操作栏（参与者/已中奖/设置/全屏/重置）                │
│  ├── 主标题展示                                               │
│  ├── 奖项卡片网格（可点击抽奖）                                │
│  └── 打赏入口（可隐藏）                                        │
├─────────────────────────────────────────────────────────────┤
│  抽奖页（/draw/:prizeId）- 抽奖动画                           │
│  ├── 3D 云团旋转抽奖动画（主效果）                             │
│  ├── 老虎机滚动模式（备选）                                    │
│  ├── 中奖结果展示                                             │
│  └── 音效配合（抽奖中/中奖瞬间）                               │
├─────────────────────────────────────────────────────────────┤
│  设置页（/settings）- 配置管理                                │
│  ├── 参与者管理                                               │
│  │   ├── 手动添加                                            │
│  │   ├── CSV/Excel 导入（支持拖拽）                           │
│  │   └── 号码区间生成                                         │
│  ├── 奖项管理                                                 │
│  │   ├── 增删改查                                            │
│  │   └── 拖拽排序                                            │
│  ├── 基础设置                                                 │
│  │   ├── 抽奖规则（重复中奖/抽取方式）  
│  │   ├── 主题配置（3套主题）                     │
│  │   └── 音效/打赏开关                                    │
│  └── 数据管理                                                 │
│      ├── 导出（CSV/Excel/JSON）                               │
│      └── 重置（二次确认，可选清除范围）                        │
├─────────────────────────────────────────────────────────────┤
│  弹窗组件（非页面）                                            │
│  ├── 中奖名单弹窗 - 从首页快捷栏打开                           │
│  ├── 重置确认弹窗 - 选择清除范围（中奖/参与者/奖项）           │
│  └── 首次引导弹窗 - 无参与者时自动弹出                         │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 详细功能需求

### 3.1 首页（奖项选择页）

#### 3.1.1 页面布局

```
┌──────────────────────────────────────────────────────────────┐
│ [←参与者] [已中奖🏆]          [设置⚙️] [全屏⛶] [重置🔄]       │  ← 快捷操作栏
├──────────────────────────────────────────────────────────────┤
│                                                              │
│                    🎉 幸运大抽奖 🎉                           │  ← 主标题
│              共 128 位参与者 · 5 个奖项待抽取                  │  ← 统计信息
│                                                              │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│   ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│   │ 一等奖   │  │ 二等奖   │  │ 三等奖   │  │ 幸运奖   │   │  ← 奖项卡片
│   │ 🥇       │  │ 🥈       │  │ 🥉       │  │ 🎁       │   │
│   │ 1名      │  │ 2名      │  │ 3名      │  │ 10名     │   │
│   │ iPhone   │  │ iPad     │  │ 耳机     │  │ 手环     │   │
│   │ [抽奖]   │  │ [已抽完] │  │ [抽奖]   │  │ [抽奖]   │   │
│   └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│              ☕ 请作者喝一杯咖啡（支持开发）                    │  ← 打赏入口
└──────────────────────────────────────────────────────────────┘
```

#### 3.1.2 功能需求

| 功能 | 描述 | 优先级 |
|-----|------|--------|
| 快捷操作栏 | 左侧：参与者入口、已中奖入口；右侧：设置、全屏、重置 | P0 |
| 主标题 | 可自定义文字，默认"幸运大抽奖"，支持动态效果 | P0 |
| 统计信息 | 显示参与者总数、奖项数量 | P1 |
| 奖项卡片 | 展示奖项名称、名额、奖品、进度，支持点击抽奖 | P0 |
| 状态标识 | 已抽完的奖项显示特殊样式（灰度/遮罩） | P0 |
| 打赏入口 | 底部固定，可设置中隐藏 | P2 |

#### 3.1.3 交互细节

- **卡片悬停**: 轻微上浮 + 阴影加深 + 边框高亮
- **点击反馈**: 缩放动画后进入抽奖页面
- **空状态**: 无参与者时提示先配置
- **首次进入**: 无参与者时自动弹出引导

---

### 3.2 抽奖页面

#### 3.2.1 3D 云团旋转模式（主效果）

```
┌──────────────────────────────────────────────────────────────┐
│ [←返回]              一等奖              1/3 已抽取          │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│                         🥇                                   │
│                      一等奖                                  │
│                   iPhone 15 Pro                              │
│                                                              │
│    ┌──────────────────────────────────────────────────┐     │
│    │                                                  │     │
│    │           ☁️  ☁️      ☁️  ☁️                     │     │
│    │        ☁️    【张三】    ☁️                      │     │  ← 3D云团
│    │     ☁️  【李四】    【王五】  ☁️                │     │     旋转效果
│    │        ☁️    【赵六】    ☁️                      │     │
│    │           ☁️  ☁️      ☁️  ☁️                     │     │
│    │                                                  │     │
│    └──────────────────────────────────────────────────┘     │
│                                                              │
│              ┌──────────────────────┐                       │
│              │    🎲 开始抽奖       │                       │  ← 抽奖按钮
│              └──────────────────────┘                       │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**动画流程**:
1. **初始状态**: 所有参与者名字以 3D 云团形式缓慢旋转
2. **点击抽奖**: 云团加速旋转，伴随音效
3. **减速定格**: 3秒后减速，名字逐个"炸开"消失
4. **中奖展示**: 中奖者名字放大显示，触发彩带特效 + 中奖音效
5. **结果列表**: 下方展示完整中奖名单

#### 3.2.2 老虎机滚动模式（备选）

```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│    ┌────────┐    ┌────────┐    ┌────────┐                 │
│    │  张    │    │  李    │    │  王    │                 │  ← 滚动窗口
│    │▓▓三▓▓ │    │▓▓四▓▓ │    │▓▓五▓▓ │                 │    高亮选中
│    │  赵    │    │  钱    │    │  孙    │                 │
│    └────────┘    └────────┘    └────────┘                 │
│                                                              │
│              ┌──────────────────────┐                       │
│              │    🎲 开始抽奖       │                       │
│              └──────────────────────┘                       │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**适用场景**: 参与者较多时（>100人），简化版抽奖

#### 3.2.3 功能需求

| 功能 | 描述 | 优先级 |
|-----|------|--------|
| 3D 云团旋转 | 参与者名字在 3D 空间中旋转，支持加速/减速 | P0 |
| 老虎机模式 | 备选方案，数字/名字在窗口中滚动 | P1 |
| 音效系统 | 抽奖中（紧张音效）、中奖瞬间（庆祝音效） | P0 |
| 粒子特效 | 抽奖时柔和粒子飘动，中奖时烟花+彩带 | P0 |
| 结果展示 | 中奖者信息展示（工号、姓名、部门） | P0 |
| 批量/单个 | 支持一次性抽取多人或逐个抽取 | P0 |

---

### 3.3 设置页面

#### 3.3.1 页面结构

```
┌──────────────────────────────────────────────────────────────┐
│ [←返回]                    设置                              │
├──────────────────────────────────────────────────────────────┤
│  [参与者] [奖项] [基础设置] [数据管理]                        │  ← Tab 切换
├──────────────────────────────────────────────────────────────┤
│                                                              │
│                    【当前 Tab 内容】                          │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

#### 3.3.2 参与者管理

**功能列表**:

| 功能 | 描述 | 优先级 |
|-----|------|--------|
| 手动添加 | 表单输入工号、姓名、部门 | P0 |
| CSV 导入 | 支持文件选择 + 拖拽上传 | P0 |
| Excel 导入 | 支持 .xlsx 文件解析 | P1 |
| 号码生成 | 输入起止编号自动生成 | P0 |
| 列表管理 | 展示、编辑、删除、搜索 | P0 |
| 模板下载 | 提供标准 CSV/Excel 模板 | P1 |

**CSV 格式规范**:
```csv
工号,姓名,部门
001,张三,技术部
002,李四,销售部
003,王五,人事部
```

#### 3.3.3 奖项管理

**默认奖项配置**:

| 奖项 | 名额 | 奖品 | 顺序 |
|-----|------|------|------|
| 一等奖 | 1 | iPhone 15 Pro | 1 |
| 二等奖 | 2 | iPad Air | 2 |
| 三等奖 | 3 | AirPods Pro | 3 |
| 幸运奖 | 10 | 小米手环 | 4 |

**功能列表**:

| 功能 | 描述 | 优先级 |
|-----|------|--------|
| 增删改查 | 奖项的完整 CRUD 操作 | P0 |
| 拖拽排序 | 调整奖项展示顺序 | P0 |
| 奖品图片 | 支持上传/选择奖品图片 | P2 |
| 名额限制 | 每个奖项 1-999 人 | P0 |

#### 3.3.4 基础设置

**抽奖规则**:

| 配置项 | 选项 | 默认 | 优先级 |
|-------|------|------|--------|
| 重复中奖 | 是 / 否 | 否 | P0 |
| 抽取方式 | 一次性 / 逐个 | 一次性 | P0 |
| 抽奖动画 | 3D云团 / 老虎机 | 3D云团 | P0 |
| 音效开关 | 开 / 关 | 开 | P0 |
| 显示打赏 | 显示 / 隐藏 | 显示 | P1 |

**界面配置**:

| 配置项 | 选项 | 默认 | 优先级 |
|-------|------|------|--------|
| 主标题 | 自定义文本 | "幸运大抽奖" | P0 |
| 字体类型 | 衬线字体 / 非衬线字体 | 衬线字体 | P1 |
| 主题配色 | 奢华金 / 中国红 / 活力橙 | 中国红 | P0 |

**副标题说明**: 副标题为自动统计信息，显示"共 X 位参与者 · Y 人已中奖 · Z 个奖项待抽取"，无需自定义

**主题配色详情**:

| 主题 | 风格 | 主色 | 背景 | 卡片 | 适用场景 |
|-----|------|------|------|------|---------|
| 奢华金 | 精致高端 | 金色 `#C9A227` | 深灰 `#1A1A2E` | 深灰 `#252542` | 高端年会 |
| 中国红 | 喜庆传统 | 红色 `#E53935` | 浅黄 `#FFF8E7` | 红色渐变 | 传统节日 |
| 活力橙 | 轻松活泼 | 橙色 `#FF6B35` | 白色 `#FFFFFF` | 白色 | 团队活动 |

**中国红配色参考**（基于上传图片）:
- 主色: `#E53935` (中国红)
- 辅色: `#FF6F61` (珊瑚红)
- 背景: `#FFF8E7` (米黄渐变)
- 卡片: 红色渐变背景 `#E53935 → #FF6F61`
- 强调: `#FFD54F` (金黄)
- 文字: `#3E2723` (深棕)
- 边框: 金色 `#FFD54F`

#### 3.3.5 数据管理

| 功能 | 描述 | 格式 | 优先级 |
|-----|------|------|--------|
| 导出中奖名单 | 导出所有中奖记录 | CSV/Excel | P0 |
| 导出全部数据 | 导出完整应用数据（备份） | JSON | P1 |
| 重置数据 | 二次确认，可选清除范围 | - | P0 |

**重置数据功能详细需求**:

重置操作需要通过弹窗进行二次确认，用户可选择要清除的数据范围：

| 选项 | 默认状态 | 说明 |
|-----|---------|------|
| 清除中奖记录 | ☑ 勾选 | 清空所有中奖历史，可重新抽奖 |
| 清除参与者 | ☐ 未勾选 | 清空参与者列表，需重新设置 |
| 清除奖项 | ☐ 未勾选 | 恢复奖项为默认值（一至五等奖） |

**重置结果场景**:
- **仅清除中奖记录**: 保留参与者和奖项配置，可立即重新抽奖
- **清除中奖+参与者**: 保留奖项，需先设置参与者才能抽奖
- **全部清除**: 恢复初始状态，等同于首次使用，需重新配置所有数据

---

### 3.4 弹窗组件

#### 3.4.1 中奖名单弹窗

**触发方式**: 点击首页快捷栏"已中奖"按钮

**内容结构**:
```
┌──────────────────────────────────────────────────────────────┐
│  中奖名单                                    [X] 关闭        │
├──────────────────────────────────────────────────────────────┤
│  统计：共 15 人中奖 · 5 个奖项已抽取                          │
├──────────────────────────────────────────────────────────────┤
│  📋 一等奖 (1/1)                                             │
│  ┌──────────┐                                                │
│  │ 张三 001 │  技术部  2026-02-08 14:30                      │
│  └──────────┘                                                │
│                                                              │
│  📋 二等奖 (2/2)                                             │
│  ┌──────────┐ ┌──────────┐                                   │
│  │ 李四 002 │ │ 王五 003 │                                   │
│  └──────────┘ └──────────┘                                   │
│                                                              │
│  [导出中奖名单]                                              │
└──────────────────────────────────────────────────────────────┘
```

**功能**:
- 按奖项分组展示中奖者
- 显示中奖者工号、姓名、部门、中奖时间
- 支持导出为 CSV/Excel
- 弹窗可滚动，支持大量数据

#### 3.4.2 重置确认弹窗

**触发方式**: 点击首页"重置"按钮或设置页数据管理"重置"

**内容结构**:
```
┌──────────────────────────────────────────────────────────────┐
│  ⚠️ 警告                                     [X] 关闭        │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  确定要重置数据吗？                                          │
│                                                              │
│  此操作将清除选中的数据，清除后无法恢复。                    │
│                                                              │
│  请选择要清除的数据：                                        │
│                                                              │
│  ☑ 清除中奖记录（已中奖 15 人）                              │
│  ☐ 清除参与者（当前 128 人）                                 │
│  ☐ 清除奖项（当前 5 个奖项）                                 │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ 提示：如果清除参与者，需要重新设置才能开始抽奖        │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│       [取消]              [确认重置]                         │
└──────────────────────────────────────────────────────────────┘
```

#### 3.4.3 首次使用引导弹窗

**触发条件**: 应用启动时检测 `participants.length === 0`

**内容结构**:
```
┌──────────────────────────────────────────────────────────────┐
│  🎉 欢迎使用幸运大抽奖                                       │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  开始使用前，请先设置参与者名单。                            │
│                                                              │
│  您可以：                                                    │
│  • 手动添加参与者                                            │
│  • 批量导入 CSV/Excel 文件                                   │
│  • 自动生成号码区间                                          │
│                                                              │
│  设置完成后即可开始抽奖！                                    │
│                                                              │
│              [前往设置参与者]                                │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**交互逻辑**:
- 弹窗不可关闭（必须设置参与者）
- 点击按钮跳转到设置页并自动打开"参与者管理"Tab
- 设置参与者后自动返回首页

---

## 4. 非功能需求

### 4.1 性能要求

- **首屏加载**: < 3秒（在 4G 网络下）
- **动画帧率**: 保持 60fps
- **数据容量**: 支持最多 1000 名参与者
- **并发抽奖**: 单次最多抽取 50 人

### 4.2 兼容性

- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **分辨率**: 支持 1920x1080 及以上（大屏优化）
- **移动端**: 适配平板，手机仅支持配置页面

### 4.3 安全性

- 所有数据本地存储，不上传服务器
- 支持数据加密导出（可选）
- 防止 XSS 攻击（输入过滤）

### 4.4 可访问性

- 支持键盘操作
- 支持屏幕阅读器
- 高对比度模式（可选）

---

## 5. 数据模型

### 5.1 实体关系

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│ Participant  │     │    Prize     │     │    Winner    │
├──────────────┤     ├──────────────┤     ├──────────────┤
│ id: string   │     │ id: string   │     │ id: string   │
│ employeeId   │◄────│ name: string │◄────│ prizeId      │
│ name: string │     │ count: number│     │ participant  │
│ department   │     │ prizeName    │     │ wonAt: Date  │
└──────────────┘     │ prizeImage   │     └──────────────┘
                     │ order: number│
                     └──────────────┘
```

### 5.2 LocalStorage 结构

```typescript
interface AppState {
  participants: Participant[];
  prizes: Prize[];
  winners: Winner[];
  settings: {
    allowRepeat: boolean;
    drawMode: 'batch' | 'single';
    animationMode: 'cloud' | 'slot';
    soundEnabled: boolean;
    showDonation: boolean;
    title: string;
    theme: 'luxury' | 'red' | 'vibrant';
  };
}
```

---

## 6. 界面元素规范

### 6.1 按钮规范

| 类型 | 样式 | 使用场景 |
|-----|------|---------|
| 主按钮 | 渐变背景 + 圆角 + 阴影 | 主要操作（抽奖、保存） |
| 次按钮 | 白色背景 + 边框 | 次要操作（取消、返回） |
| 图标按钮 | 圆形 + 悬停效果 | 工具栏操作 |
| 危险按钮 | 红色系 | 删除、重置 |

### 6.2 卡片规范

- 圆角: 16px-24px
- 阴影: 多层柔和阴影
- 边框: 1px 半透明边框
- 悬停: 上浮 + 阴影加深

### 6.3 字体规范

- 标题: Noto Serif SC / Playfair Display
- 正文: Noto Sans SC / Inter
- 数字: Roboto Mono（等宽）

---

## 7. 附录

### 7.1 术语表

| 术语 | 解释 |
|-----|------|
| 3D 云团 | 参与者名字在三维空间中旋转的视觉效果 |
| LocalStorage | 浏览器本地存储，数据持久化但容量有限 |
| 批量抽取 | 一次性抽取多个中奖者 |
| 逐个抽取 | 每次只抽取一个中奖者 |

### 7.2 参考资源

- 配色参考: 上传图片（中国红主题）
- 动画参考: GSAP 3D 动画、Three.js 粒子系统
- 音效参考: Web Audio API、Howler.js

---

**文档结束**
